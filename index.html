<!DOCTYPE html>
<html>
    <title>Mathroaaugelike - 2020</title>
    <head>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

       <style>
         body{
           color: white;
           background: black;
         }
         .textarea {
    -moz-appearance: textfield-multiline;
    -webkit-appearance: textarea;
    border: 1px solid gray;
    font: medium -moz-fixed;
    font: -webkit-small-control;
    height: 280px;
    overflow: auto;
    padding: 2px;
    resize: both;
    width: 400px;
}
       </style>
      
       
    </head>
    <body>
      <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    
    
        <main role="main" class="container">
        <h1 class="text-center">Math Rougelike</h1>
        
        <div class="row">
            <div class="col-lg-12" id="hp"></div>
            <div class="col-lg-9" id="game"></div>
            <div class="col-lg-3" id="desc">
              <form id="loginForm" action="">
                Nickname<br>
                <input id="nickname" type="text" /><button>Connect</button>

              </form>

              <div id="chatArea">
                <h3>Messages</h3>
                
                
                <div class="textarea" id="messages"></div>
                <div class="numUsers" id="numUsers">Users: 1</div>
                <div class="textarea" id="chat"></div>
                
                <form id="chatForm" action="">
                  <input id="m" autocomplete="off" /><button>Send</button>
                </form>
                </div>
           </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <b>Controls</b><br>
                <kbd>a</kbd> = Left <kbd>d</kbd> = right<br>
                <kbd>s</kbd> = down <kbd>w</kbd> = up<br>
                <kbd>Return</kbd> = go up/down<br>
                
                
            </div>
           
            <div class="col-lg-6">
                
                <b>Monsters</b><br>
                p = plus<br>
                m = minus<br>
                M = multiple<br>
            </div>
            <!-- <div class="col-lg-4">
                <b>Highscore</b><br>
                <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Level</th>
                        <th>Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">1</th>
                        <td>Mark</td>
                        <td>6</td>
                        <td>1000</td>
                      </tr>
                      <tr>
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>4</td>
                        <td>800</td>
                      </tr>
                      <tr>
                        <th scope="row">3</th>
                        <td>Larry</td>
                        <td>3</td>
                        <td>500</td>
                      </tr>
                    </tbody>
                  </table>

                
            </div> -->
        </div>
        </main>
        <script type="module" src="assets/main.js">
      
     
    
        </script>
     
          <script>
    
        $(function () {
    var socket = io();
    $('#chatArea').hide();
    
    $('#chatForm').submit(function(e){
      e.preventDefault(); // prevents page reloading
      let message=$('#m').val();
      if (message.length < 2)
        return false;
      
      let o = {"nickname": $('#nickname').val(), "msg": message}
      socket.emit('chat message', o);
      $('#m').val('');
      return false;
    });
    $('#loginForm').submit(function(e){
      e.preventDefault(); // prevents page reloading
      let nickname=$('#nickname').val();
      if (nickname.length < 2)
      {
        alert("nickname length should be >= 2.");
        return false;
      }
      socket.emit('login', nickname);
      $('#m').val('');
      return false;
    });

    socket.on('loginAccepted', function(id){
      document.socketId = id;
      $('#chatArea').show();
      $('#loginForm').hide();

    });

    socket.on('users', function(users){
        console.log("numUsers:" + users.length)
        let el = document.getElementById("numUsers");
        el.innerHTML="<b>Users: <b>" + users.length;
        document.users = users;
    });

    socket.on('chat message', function(r){
      let el = document.getElementById("chat");
      console.log(r);
      $(el).append(r.nickname + '->' + r.msg + '<br>');
      
    });
  });
   
        </script>
       
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    </body>
    
</html>